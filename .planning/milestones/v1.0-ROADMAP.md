# Milestone v1.0: New Direction

**Status:** ✅ SHIPPED 2026-01-17
**Phases:** 5-8
**Total Plans:** 5 plans (Phase 9 cancelled)

## Overview

Expand AWS comparison tool with compute services (Lambda, ECS), dark mode support, and multi-scenario comparison with export capabilities. This milestone pivoted from pure design work to adding substantive functionality with new service integrations and enhanced comparison features.

**Note:** Phase 9 (Cross-Service Cost Analysis) was planned but cancelled as unnecessary — milestone complete at Phase 8.

## Phases

### Phase 5: Lambda Service Integration

**Goal**: Add Lambda service with invocation-based pricing, memory/duration configurations, and cost calculations
**Depends on**: v0.1 milestone complete
**Plans**: 1 plan

Plans:
- [x] 05-01: Lambda Core Implementation — Lambda service fully integrated with invocation-based pricing and architecture comparison

**Details:**
- Lambda type definitions with architecture and memory tier metadata
- Cost calculator with request + GB-second pricing for x86 and ARM
- Lambda config form with animated controls and validation
- Lambda comparison page using generic framework
- Service registered and accessible from landing page

**Key Decisions:**
- Used emoji icon (⚡) for Lambda on landing page to match existing S3/Aurora pattern
- Memory tier quick-select dropdown provides common configurations (128MB-10GB)
- GB-seconds calculation displayed in real-time below duration input for transparency
- Default comparison config: x86 vs ARM at 1GB memory, 1M invocations, 200ms duration to showcase architecture savings

**Completed:** 2026-01-11

---

### Phase 6: ECS Service Integration

**Goal**: Add ECS service supporting Fargate, EC2, and managed infrastructure pricing comparisons
**Depends on**: Phase 5
**Plans**: 1 plan

Plans:
- [x] 06-01: ECS Core Implementation — ECS Fargate service with architecture comparison and cost calculations fully integrated

**Details:**
- ECS Fargate service integration complete with x86 vs ARM Graviton2 architecture comparison
- Type-safe cost calculations with vCPU and memory pricing for both architectures
- Animated configuration form with real-time validation and cost preview
- Default comparison demonstrates ~20% ARM Graviton2 cost savings at identical configurations
- Seamless integration following established Lambda service pattern

**Key Decisions:**
None - followed established Lambda integration pattern without deviation.

**Completed:** 2026-01-13

---

### Phase 7: Dark Mode Theme

**Goal**: Implement dark mode with theme toggle, dark-optimized colors, and persistent preference
**Depends on**: Phase 6
**Plans**: 1 plan

Plans:
- [x] 07-01: Dark Mode Implementation — Complete dark mode implementation with theme toggle, Material Design color system, localStorage persistence, and WCAG AA accessibility compliance

**Details:**
- Dark theme color palette with Material Design guidelines (elevated surfaces, desaturated colors, proper contrast ratios)
- Theme management system with Context API, localStorage persistence, and prefers-color-scheme fallback
- Animated theme toggle button with sun/moon icons and smooth transitions
- Comprehensive dark mode variants across all components (landing page, navigation, forms, charts, cost breakdowns)
- WCAG AA compliant contrast ratios maintained in both light and dark themes
- Chart labels optimized with horizontal orientation, #E5E7EB color, and proper spacing

**Key Decisions:**
- Used .dark class approach for theme control vs media queries to enable manual toggle support
- localStorage for theme persistence ('theme-preference' key) without requiring authentication
- Material Design dark theme guidelines: desaturated colors, lighter primary/secondary variants (300-400 range)
- WCAG AA contrast ratios maintained: 4.5:1 for text, 3:1 for UI elements
- Chart labels use fixed #E5E7EB color for consistency across both themes
- All form inputs require explicit dark backgrounds (bg-white dark:bg-neutral-900)
- Text elements use high-contrast pairs (neutral-900/100 or neutral-700/300) instead of mid-grey tones

**Completed:** 2026-01-13

---

### Phase 8: Multi-Scenario Comparison & Export

**Goal**: Enable creating multiple volume scenarios (A, B, C) and exporting comparison graphs as downloadable images
**Depends on**: Phase 7
**Plans**: 2 plans

Plans:
- [x] 08-01: Chart Export Functionality — PNG chart export with recharts-to-png integration and themed download button
- [x] 08-02: Multi-Scenario Comparison Mode — Multi-scenario comparison with 2-4 configurable scenarios and dynamic visualization

**Details (08-01):**
- Installed recharts-to-png and file-saver dependencies for chart export functionality
- Integrated useCurrentPng hook to capture chart as PNG data URL
- Added "Download Chart" button with loading state and theme-aware primary styling
- Export works consistently across all service comparison pages (S3, Aurora, Lambda, ECS)

**Details (08-02):**
- Scenario<TConfig> type with id, label, config fields for flexible configuration management
- Multi-scenario state management with add/remove/update helper functions (min 2, max 4 scenarios)
- Scenario management UI with editable labels, color-coded indicators, and remove buttons
- AnimatePresence-powered enter/exit animations for smooth scenario transitions
- Dynamic chart rendering supporting 2-4 scenarios with distinct Material Design colors
- Export filename reflects scenario count: aws-{service}-{N}-scenarios.png

**Key Decisions:**
- Used recharts-to-png@3.0.1 for compatibility with existing Recharts 3.3.0
- Attached ref to ResponsiveContainer (parent) instead of BarChart for proper chart capture
- Fixed filename 'aws-comparison.png' for consistent downloads across all services
- Download button positioned bottom-right with primary styling and loading state
- Local useState<Scenario[]> for multi-scenario state management instead of external state library
- Vertical stack layout for scenario cards instead of grid for better scalability beyond 2 configs
- Max 4 scenarios to maintain chart readability and avoid visual clutter
- Color palette: primary-500, secondary-500, purple-500, teal-500 (avoiding green/red to prevent confusion with savings indicators)
- Unified breakdowns array pattern for both 2-config and N-scenario modes with backwards compatibility

**Completed:** 2026-01-15

---

### Phase 9: Cross-Service Cost Analysis

**Goal**: Enable comparing costs across all services (RDS, S3, Aurora, Lambda, ECS) with unified recommendations
**Depends on**: Phase 8
**Plans**: N/A
**Status**: ❌ CANCELLED (2026-01-17) — Feature deemed unnecessary

Plans:
- [x] 09-01: CANCELLED — Phase cancelled before execution

**Rationale for Cancellation:**
Feature was deemed unnecessary after reviewing the implementation requirements. Cross-service cost comparison would be comparing apples to oranges (storage vs compute vs database) and would not provide meaningful insights to users. Each service comparison is already optimized for within-service configuration decisions.

---

## Milestone Summary

**Key Accomplishments:**

1. **Lambda serverless compute integration** — Added Lambda service with invocation-based pricing, x86 vs ARM architecture comparison, and GB-second cost calculations
2. **ECS container service integration** — Integrated ECS Fargate with vCPU/memory pricing, demonstrating ~20% ARM Graviton2 cost savings
3. **Complete dark mode implementation** — Material Design dark theme with WCAG AA compliance, localStorage persistence, and animated theme toggle
4. **PNG chart export capability** — Integrated recharts-to-png for downloadable comparison charts across all services
5. **Multi-scenario comparison mode** — Enable creating and comparing 2-4 volume scenarios simultaneously with color-coded visualizations

**Key Decisions from PROJECT.md:**

- Pure frontend redesign maintained (no backend changes) throughout v1.0
- Interactive exploration as primary feature continues to drive UX decisions
- Framer Motion variants approach proven effective across new Lambda and ECS components
- Material Design dark theme guidelines successfully extended to all new services

**Issues Resolved:**

- Dark mode required multiple verification cycles to catch all contrast issues across component tree
- Recharts theming required inline style objects with theme-aware color values using useTheme hook
- Chart label styling required horizontal orientation and fixed colors for readability

**Issues Deferred:**

None for v1.0.

**Technical Debt Incurred:**

None identified during v1.0 development.

---

_For current project status, see .planning/ROADMAP.md_
