---
phase: 02-component-redesign
plan: 03
type: execute
---

<objective>
Redesign charts and cost breakdown displays with dynamic animations.

Purpose: Animate cost visualizations and breakdowns to draw attention to key insights and cost differences.
Output: ComparisonChart, CostBreakdown, and AuroraCostBreakdown with smooth value transitions and highlighted insights.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-design-foundation/DESIGN_SYSTEM.md
@.planning/phases/02-component-redesign/02-01-SUMMARY.md
@.planning/phases/02-component-redesign/02-02-SUMMARY.md
@src/utils/animations.ts
@src/components/ComparisonChart.tsx
@src/components/CostBreakdown.tsx
@src/components/AuroraCostBreakdown.tsx

**Tech stack available:** framer-motion@12.25.0, recharts@3.3.0
**Established patterns:** costChangeVariants for value updates, highlightVariants for emphasis, cardVariants for containers
**Prior accomplishments:** Layout and forms redesigned with animation system

**Constraining decisions:**
- Phase 1: Cost-specific semantic colors (savings=green, increase=red, neutral=gray)
- Phase 1: 3-level elevation shadow system
- Phase 2 Plan 1-2: Consistent animation timing and patterns
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign ComparisonChart with animated bars</name>
  <files>src/components/ComparisonChart.tsx</files>
  <action>
  Enhance Recharts visualization:
  - Wrap ResponsiveContainer in motion.div with fadeInUpVariants for entrance
  - Use Recharts animationDuration={500} and animationEasing="ease-in-out" (Material Design motion timing)
  - Apply cost-specific colors to bars: primary-500 for config1, secondary-500 for config2
  - Enhance Tooltip with shadow-hover elevation and transition-quick
  - Update CartesianGrid with neutral-200 color for subtle grid
  - Use neutral-700 for axis labels (better contrast)
  - Add motion.div wrapper around chart title with fadeInUpVariants

  What to avoid: Don't change chart data structure, don't modify BarChart props that affect layout (margin, height), don't alter XAxis/YAxis configuration beyond colors. Recharts handles its own bar animations.
  </action>
  <verify>npm run build passes, chart renders with smooth bar animations, tooltip shows on hover with elevation, colors match theme</verify>
  <done>ComparisonChart has animated entrance, bars transition smoothly on data changes, tooltip styled with Material Design, cost-specific colors applied</done>
</task>

<task type="auto">
  <name>Task 2: Redesign CostBreakdown with animated values</name>
  <files>src/components/CostBreakdown.tsx</files>
  <action>
  Apply animation to cost display:
  - Wrap breakdown container in motion.div with cardVariants
  - Apply costChangeVariants to each cost value (use key prop with cost value to trigger re-animation)
  - Use highlightVariants for total cost (most important number)
  - Add fadeInUpVariants with stagger to breakdown items list
  - Apply elevation system: shadow-subtle at rest
  - Use cost-neutral color for neutral breakdown items, cost-savings/cost-increase for comparative displays
  - Add subtle border-l-4 with primary-500 to breakdown container

  What to avoid: Don't modify breakdown.items structure, don't change cost calculation display logic, don't alter label rendering. Keep existing formatting (toFixed(2)).
  </action>
  <verify>Cost values animate when they change, total cost highlighted, breakdown items stagger in, npm run build succeeds</verify>
  <done>CostBreakdown displays animated cost values, total prominently highlighted, visual hierarchy clear with elevation</done>
</task>

<task type="auto">
  <name>Task 3: Redesign AuroraCostBreakdown with consistent patterns</name>
  <files>src/components/AuroraCostBreakdown.tsx</files>
  <action>
  Apply same patterns as CostBreakdown:
  - Wrap container in motion.div with cardVariants
  - Apply costChangeVariants to each cost value (key prop for re-animation)
  - Use highlightVariants for total cost display
  - Add fadeInUpVariants with stagger for breakdown items
  - Use shadow-subtle elevation, border-l-4 with secondary-500 (Aurora-specific color)
  - Apply cost-specific semantic colors where appropriate
  - Ensure consistent spacing and typography with CostBreakdown

  What to avoid: Don't modify Aurora-specific breakdown logic, don't change cost calculation, don't alter conditional rendering (serverless vs provisioned differences). Maintain all existing breakdown structure.
  </action>
  <verify>Aurora cost breakdown matches CostBreakdown animation patterns, values animate on change, total highlighted, npm run build passes</verify>
  <done>AuroraCostBreakdown has consistent animations with CostBreakdown, cost values animate smoothly, visual hierarchy matches rest of app</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] All three components render correctly
- [ ] Chart bars animate smoothly
- [ ] Cost values update with animations when configs change
- [ ] Totals prominently highlighted
- [ ] No console errors or warnings
- [ ] Animations respect prefers-reduced-motion
- [ ] Phase 2 complete - all core components redesigned
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- ComparisonChart, CostBreakdown, and AuroraCostBreakdown redesigned
- Cost visualizations animated and engaging
- Cost-specific colors applied consistently
- Visual hierarchy clear with elevation and highlights
- **Phase 2 complete** - all core UI components redesigned with animation system
</success_criteria>

<output>
After completion, create `.planning/phases/02-component-redesign/02-03-SUMMARY.md`:

# Phase 2 Plan 3: Charts and Cost Displays Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]
- Phase 2 complete

## Files Created/Modified

- `src/components/ComparisonChart.tsx` - Applied Recharts animations, cost-specific bar colors, enhanced tooltip
- `src/components/CostBreakdown.tsx` - Added costChangeVariants to values, highlightVariants to total, staggered items
- `src/components/AuroraCostBreakdown.tsx` - Applied consistent animation patterns with CostBreakdown

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

âœ… **Phase 2 Complete** - Component Redesign finished

All core UI components redesigned with:
- Animation system from Phase 1 applied throughout
- Cost-specific visual language (colors, shadows, motion)
- Interactive controls with smooth feedback
- Charts and visualizations animated

**Ready for Phase 3:** Interactive Features (micro-interactions, hover effects, drill-down details)
</output>
